<div class="page-header">
  <p>IQB-Testcenter Test√ºberwachung</p>
</div>

<div class="page-body">
  <div class="adminbackground">

    <p>Connected Admins: {{clientCount$ | async}}</p>
    <p>
      Broadcast Service Connected:
      <span class="{{(serviceConnected$ | async) ? 'green' : 'red'}}">{{(serviceConnected$ | async) ? 'yes' : 'no'}}</span>
    </p>

    <table mat-table [dataSource]="dataSource$">

      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let element" matTooltip="{{element.personId}}">{{element.personLabel}}</td>
      </ng-container>

      <ng-container matColumnDef="personStatus">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let element">{{element.personStatus}}</td>
      </ng-container>

      <ng-container matColumnDef="test">
        <th mat-header-cell *matHeaderCellDef>Test</th>
        <td mat-cell *matCellDef="let element" matTooltip="{{element.testId}}">{{element.testLabel}}</td>
      </ng-container>

      <ng-container matColumnDef="testStatus">
        <th mat-header-cell *matHeaderCellDef>Test-Status</th>
        <td mat-cell *matCellDef="let element">
          <table>
            <tr *ngFor="let item of element.testState | keyvalue">
              <td>{{item.key}}</td><td>{{item.value}}</td>
            </tr>
          </table>
        </td>
      </ng-container>

      <ng-container matColumnDef="unit">
        <th mat-header-cell *matHeaderCellDef>Unit</th>
        <td mat-cell *matCellDef="let element">{{element.unitName}}</td>
      </ng-container>

      <ng-container matColumnDef="unitStatus">
        <th mat-header-cell *matHeaderCellDef>Unit-Status</th>
        <td mat-cell *matCellDef="let element">
          <table>
            <tr *ngFor="let item of element.unitState | keyvalue">
              <td>{{item.key}}</td><td>{{item.value}}</td>
            </tr>
          </table>
        </td>
      </ng-container>


      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>


    <pre>{{dataSource$ | async | json}}</pre>

</div>
</div>
